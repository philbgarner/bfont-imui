{"version":3,"file":"bfont-imui.js","mappings":"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","sources":["webpack://imui/webpack/universalModuleDefinition","webpack://imui/external umd \"canvas\"","webpack://imui/webpack/bootstrap","webpack://imui/webpack/runtime/define property getters","webpack://imui/webpack/runtime/hasOwnProperty shorthand","webpack://imui/webpack/runtime/make namespace object","webpack://imui/./src/elements/Element.js","webpack://imui/./src/elements/FrameFlat.js","webpack://imui/./src/elements/Frame3d.js","webpack://imui/./src/elements/Button3d.js","webpack://imui/./src/elements/ButtonFlat.js","webpack://imui/./src/elements/TextBoxFlat.js","webpack://imui/./src/elements/List.js","webpack://imui/./src/elements/Image.js","webpack://imui/./src/elements/FrameImage.js","webpack://imui/./src/elements/ButtonImage.js","webpack://imui/./src/imui.js","webpack://imui/./src/elements.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"canvas\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"canvas\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imui\"] = factory(require(\"canvas\"));\n\telse\n\t\troot[\"imui\"] = factory(root[\"canvas\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__517__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__517__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { createCanvas } from 'canvas'\r\n\r\nclass Element {\r\n    constructor(params) {\r\n        if (!params.id) {\r\n            throw new Error('Element must have unique id.')\r\n        }\r\n        this.id = params.id\r\n\r\n        this.autosize = params.autosize ? params.autosize : true\r\n        if (params.rect) {\r\n            this.autosize = false\r\n        }\r\n        this.rect = params.rect ? params.rect : { x: 0, y: 0, w: 0, h: 0 }\r\n        this.color = params.color ? params.color : '#ccccccff'\r\n        this.bgcolor = params.bgcolor ? params.bgcolor : undefined\r\n        this.text = params.text ? params.text : ''\r\n        this.prevText = this.text\r\n        \r\n        this.wrap = params.wrap ? params.wrap : ''\r\n\r\n        this.font = params.font ? params.font : null\r\n\r\n        this.rect.x = params.x ? params.x : this.rect.x\r\n        this.rect.y = params.y ? params.y : this.rect.y\r\n\r\n        this.state = {\r\n            clicked: false,\r\n            mouseOver: false,\r\n            mouseDown: false,\r\n            mouseUp: false,\r\n            change: true\r\n        }\r\n        this.prevState = params.prevState ? params.prevState :\r\n            {\r\n                clicked: false,\r\n                mouseOver: false,\r\n                mouseDown: false,\r\n                mouseUp: false,\r\n                change: false\r\n            }\r\n\r\n        this.buffer = null\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer()\r\n        }\r\n    }\r\n\r\n    InitializeBuffer(margin) {\r\n        let mx = 0, my = 0\r\n        if (margin) {\r\n            mx = margin.x\r\n            my = margin.y\r\n            this.margin = margin\r\n        } else {\r\n            this.margin = { x: 0, y: 0 }\r\n        }\r\n        try {\r\n            this.buffer = document.createElement('canvas')\r\n            this.buffer.width = this.rect.w + mx\r\n            this.buffer.height = this.rect.h + my\r\n            this.bufferCtx = this.buffer.getContext('2d')\r\n        } catch {\r\n            this.buffer = createCanvas(this.rect.w + mx, this.rect.h + my)\r\n            this.bufferCtx = this.buffer.getContext('2d')\r\n        }\r\n    }\r\n\r\n    DidChangeState() {\r\n        return this.prevState.clicked !== this.state.clicked ||\r\n            this.prevState.mouseOver !== this.state.mouseOver ||\r\n            this.prevState.mouseDown !== this.state.mouseDown ||\r\n            this.prevState.mouseUp !== this.state.mouseUp ||\r\n            this.prevState.change !== this.state.change\r\n    }\r\n\r\n    BuildPreviousState() {\r\n        return {\r\n            clicked: this.state.clicked,\r\n            mouseOver: this.state.mouseOver,\r\n            mouseDown: this.state.mouseDown,\r\n            mouseUp: this.state.mouseUp,\r\n            change: this.state.change\r\n        }\r\n    }\r\n\r\n    InsideRect(x, y, rect) {\r\n        let r = rect ? rect : this.rect\r\n        return x >= r.x && x < r.x + r.w && y >= r.y && y < r.y + r.h\r\n    }\r\n\r\n    Clicked() { return this.state.clicked }\r\n    Hover() { return this.state.mouseOver }\r\n    MouseDown() { return this.state.mouseDown }\r\n    MouseUp() { return this.state.mouseUp }\r\n\r\n    setState(params) {\r\n        this.prevState = this.BuildPreviousState()\r\n        for (let p in params) {\r\n            this.state[p] = params[p]\r\n        }\r\n    }\r\n\r\n    Update(imui, eventHandled) {\r\n        let evt = false\r\n        if (this.autosize) {\r\n            this.rect.w = this.text.length * imui.font.cwidth\r\n            this.rect.h = imui.font.cheight\r\n        }\r\n        if (this.state.clicked && this.id !== imui.active) {\r\n            imui.active = this.id\r\n            this.setState({ changed: true })\r\n            evt = true\r\n        }\r\n        if (imui.mousePos.x >= this.rect.x && imui.mousePos.y >= this.rect.y && imui.mousePos.x <= this.rect.x + this.rect.w && imui.mousePos.y <= this.rect.y + this.rect.h) {\r\n            if (this.state.mouseOver && this.state.clicked) {\r\n                this.setState({ mouseOver: true, clicked: false})\r\n                evt = true\r\n            } else if (!eventHandled) {\r\n                this.setState({ mouseOver: true })\r\n                evt = true\r\n            }\r\n            if (imui.mouseButton > 0 && !this.state.mouseDown) {\r\n                this.setState({ mouseDown: true })\r\n                evt = true\r\n            } else if (imui.mouseButton === 0 && this.prevState.mouseDown) {\r\n                this.setState({ mouseUp: true, mouseDown: false })\r\n                evt = true\r\n            }\r\n        } else {\r\n            this.setState({ mouseOver: false, mouseDown: false, mouseUp: false, clicked: false })\r\n        }\r\n        if (imui.mouseButton === 0 && this.state.mouseUp) {\r\n            this.setState({ mouseUp: false, clicked: true })\r\n            imui.active = this.id\r\n            evt = true\r\n        }\r\n        if (this.text !== this.prevText) {\r\n            this.setState({ change: true })\r\n            this.prevText = this.text\r\n        } else {\r\n            this.setState({ change: false })\r\n        }        \r\n        \r\n        return evt\r\n    }\r\n\r\n    GetMaxTextWidth(font, txt) {\r\n        let lines = []\r\n        try {\r\n            if (typeof txt === 'number') {\r\n                txt = font.codepage.filter(f => f.codenumber === txt)[0].symbol\r\n            }\r\n            lines = txt.split('\\n')\r\n        } catch (e) {\r\n            console.log('Error splitting txt parameters: ', e, ' typeof txt =', typeof txt)\r\n        }\r\n        let w = 0\r\n        for (let l in lines) {\r\n            let line = lines[l]\r\n            if (line.length * font.cwidth > w) {\r\n                w = line.length * font.cwidth\r\n            }\r\n        }\r\n        return w\r\n    }\r\n\r\n    GetWrappedText(font, txt, rect) {\r\n        let lines = txt.split('\\n')\r\n        let wrapPos = parseInt(rect.w / font.cwidth)\r\n        let c = 0\r\n        while (this.GetMaxTextWidth(font, lines.join('\\n')) >= rect.w && c <= 100) {\r\n            let newLines = []\r\n            for (let l in lines) {\r\n                let lineWidth = lines[l].length * font.cwidth\r\n                if (lineWidth > rect.w) {\r\n                    newLines.push(lines[l].slice(0, wrapPos).trim(),\r\n                                    lines[l].slice(wrapPos, lines[l].length).trim())\r\n                } else {\r\n                    newLines.push(lines[l])\r\n                }\r\n            }\r\n            lines = newLines\r\n            c++\r\n        }\r\n        return lines.join('\\n')\r\n    }\r\n\r\n    GetWordWrappedText(font, txt, rect) {\r\n        let lines = txt.split('\\n')\r\n        let wrapPos = parseInt(rect.w / font.cwidth)\r\n        let c = 0\r\n        while (this.GetMaxTextWidth(font, lines.join('\\n')) >= rect.w && c <= 100) {\r\n            let newLines = []\r\n            for (let l in lines) {\r\n                let lineWidth = lines[l].length * font.cwidth\r\n                if (lineWidth > rect.w) {\r\n                    // newLines.push(lines[l].slice(0, wrapPos).trim(),\r\n                    //                 lines[l].slice(wrapPos, lines[l].length).trim())\r\n                    let line = lines[l].substring(0, wrapPos).split('').reverse().join('')\r\n                    let index = line.search(/\\s/)\r\n                    newLines.push(lines[l].slice(0, wrapPos - index).trim(),\r\n                                        lines[l].slice(wrapPos - index, lines[l].length).trim())\r\n                } else {\r\n                    newLines.push(lines[l])\r\n                }\r\n            }\r\n            lines = newLines\r\n            c++\r\n        }\r\n        return lines.join('\\n')\r\n    }\r\n\r\n    DrawText(imui, font, rect) {\r\n        let textcolor = this.color\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n        }\r\n        let txt = this.text\r\n\r\n        font = font ? font : bfontjs.Fonts().default\r\n        if (this.GetMaxTextWidth(font, txt) > this.rect.w) {\r\n            if (this.wrap === 'clip') {\r\n                let rectCharWidth = Math.floor(this.rect.w / font.cwidth)\r\n                txt = txt.substring(0, rectCharWidth)\r\n            } else if (this.wrap === 'ellipses') {\r\n                let rectCharWidth = Math.floor(this.rect.w / font.cwidth)\r\n                txt = txt.substring(0, rectCharWidth - 3)\r\n                txt += '...'\r\n            } else if (this.wrap === 'wrap') {\r\n                txt = this.GetWrappedText(font, txt, this.rect)\r\n            } else if (this.wrap === 'word-wrap') {\r\n                txt = this.GetWordWrappedText(font, txt, this.rect)\r\n            }\r\n    }\r\n        imui.DrawTextFont(font, rect.x, rect.y, txt, textcolor)\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n\r\n        this.DrawText(imui, imui.font, rect)\r\n    }\r\n\r\n    Draw(imui) {\r\n        let rect = this.rect\r\n        if (this.buffer) {\r\n            imui.ChangeContext(this.buffer)\r\n            rect = { x: 0, y: 0, w: this.rect.w, h: this.rect.h }\r\n\r\n            if (this.DidChangeState() || (!this.initialDrawComplete)) {\r\n                if (this.buffer) {\r\n                    this.bufferCtx.clearRect(0, 0, rect.w, rect.h)\r\n                }\r\n                \r\n                this._Draw(imui, rect)\r\n                this.initialDrawComplete = true\r\n            }\r\n\r\n            imui.ResetContext()\r\n            imui.ctx.drawImage(this.buffer, this.rect.x, this.rect.y)\r\n        } else {\r\n            this._Draw(imui, this.rect)\r\n        }\r\n    }\r\n}\r\n\r\nexport default Element\r\n","import Element from './Element.js'\r\n\r\nclass FrameFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n        imui.StrokeRect(borderRect, this.color)\r\n\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + imui.font.cheight, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default FrameFlat","import Element from './Element.js'\r\n\r\nclass Frame3d extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n\r\n        let highlight = !this.inverted ? this.highlight : this.shadow\r\n        let shadow = !this.inverted ? this.shadow : this.highlight\r\n\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x + borderRect.w, borderRect.y, highlight)\r\n        imui.StrokeLine(borderRect.x + borderRect.w, borderRect.y, borderRect.x + borderRect.w, borderRect.y + borderRect.h, highlight)\r\n        imui.StrokeLine(borderRect.x, borderRect.y + borderRect.h, borderRect.x + borderRect.w, borderRect.y + borderRect.h, shadow)\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x, borderRect.y + borderRect.h, shadow)\r\n\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + imui.font.cheight, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default Frame3d","import Element from './Element.js'\r\n\r\nclass Button3d extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n        \r\n        let inverted = this.inverted ? this.inverted : false\r\n        if (this.state.mouseDown) {\r\n            inverted = true\r\n        }\r\n\r\n        let highlight = !inverted ? this.highlight : this.shadow\r\n        let shadow = !inverted ? this.shadow : this.highlight\r\n\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x + borderRect.w, borderRect.y, highlight)\r\n        imui.StrokeLine(borderRect.x + borderRect.w, borderRect.y, borderRect.x + borderRect.w, borderRect.y + borderRect.h, highlight)\r\n        imui.StrokeLine(borderRect.x, borderRect.y + borderRect.h, borderRect.x + borderRect.w, borderRect.y + borderRect.h, shadow)\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x, borderRect.y + borderRect.h, shadow)\r\n\r\n        let mx = 0, my = 0\r\n        if (this.state.mouseDown) {\r\n            mx = parseInt(imui.font.cwidth * 0.3)\r\n            my = parseInt(imui.font.cheight * 0.1)\r\n        }\r\n        imui.DrawText(borderRect.x + mx + borderRect.w / 2 - (txt.length * imui.font.cwidth) / 2, borderRect.y + my + borderRect.h / 2 - imui.font.cheight / 2, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default Button3d","import Element from './Element.js'\r\n\r\nclass ButtonFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.leftChar = params.leftChar ? params.leftChar : '<'\r\n        this.rightChar = params.rightChar ? params.rightChar : '>'\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            if (this.state.mouseDown) {\r\n                textcolor = this.bgcolor\r\n                bgcolor = this.color\r\n            }\r\n\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n        }\r\n\r\n        imui.DrawText(rect.x + rect.w / 2 - (txt.length * imui.font.cwidth) / 2, rect.y + rect.h / 2 - imui.font.cheight / 2, txt, textcolor)\r\n\r\n        imui.DrawText(rect.x, rect.y + rect.h / 2 - imui.font.cheight / 2, this.leftChar, textcolor)\r\n        imui.DrawText(rect.x + rect.w - imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, this.rightChar, textcolor)\r\n    }\r\n}\r\n\r\nexport default ButtonFlat","import Element from './Element.js'\r\n\r\nclass TextBoxFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.text = params.defaultText ? params.defaultText : ''\r\n            \r\n        this.editable = params.editable ? params.editable : true\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    Text() { return this.text }\r\n\r\n    _Draw(imui, rect) {\r\n        let txt = this.text.length > (rect.w - imui.font.cwidth * 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            if (this.state.mouseDown) {\r\n                textcolor = this.bgcolor\r\n                bgcolor = this.color\r\n            }\r\n\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n            if (Date.now() % 1000 > 500) {\r\n                imui.DrawText(rect.x + imui.font.cwidth + txt.length * imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, '_', textcolor)\r\n            }\r\n        }\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, txt, textcolor)\r\n\r\n\r\n        let leftChar = '[', rightChar = ']'\r\n\r\n        imui.DrawText(rect.x, rect.y + rect.h / 2 - imui.font.cheight / 2, leftChar, textcolor)\r\n        imui.DrawText(rect.x + rect.w - imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, rightChar, textcolor)\r\n    }\r\n}\r\n\r\nexport default TextBoxFlat","import Element from './Element.js'\r\n\r\nclass List extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.bgScrollbar = params.bgScrollbar ? params.bgScrollbar : '#645355ff'\r\n        this.list = params.list ? params.list : []\r\n        this.currentItem = null\r\n        this.scrollOffset = params.scrollOffset ? params.scrollOffset : 0\r\n        this.topDown = params.topDown ? params.topDown : true\r\n        this.horizontal = params.horizontal ? params.horizontal : false\r\n        this.scrollbar = params.scrollbar ? params.scrollbar : true\r\n\r\n        this.scrollbarCharacters = {\r\n            scrollUp: params.scrollUp ? params.scrollUp : 252,\r\n            scrollDown: params.scrollDown ? params.scrollDown : 253,\r\n            scrollCaret: params.scrollCaret ? params.scrollCaret : 254\r\n        }\r\n\r\n        this.draggingCaret = false\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n\r\n        let dx = rect.x + imui.font.cwidth\r\n        let dy = rect.y\r\n        for (let l = this.scrollOffset; l < this.list.length; l++) {\r\n            let txt = this.list[l]\r\n\r\n            let txtRect = { x: dx, y: dy, w: txt.length * imui.font.cwidth, h: imui.font.cheight }\r\n            let isHoverItem = this.state.mouseOver &&\r\n                imui.mousePos.y >= txtRect.y && imui.mousePos.x >= txtRect.x &&\r\n                imui.mousePos.x < txtRect.x + txtRect.w && imui.mousePos.y < txtRect.y + txtRect.h\r\n            let isMouseDownItem = this.state.mouseDown && imui.mousePos.y >= txtRect.y && imui.mousePos.x >= txtRect.x &&\r\n                    imui.mousePos.x < txtRect.x + txtRect.w && imui.mousePos.y < txtRect.y + txtRect.h\r\n            if (isMouseDownItem) {\r\n                this.currentItem = l\r\n            }\r\n\r\n            imui.DrawText(dx, dy, txt, isHoverItem ? textcolor : this.color, isHoverItem || this.currentItem === l ? { background: { colour: isMouseDownItem ? '#ccccccff' : this.bgScrollbar }} : undefined)\r\n            if (!this.horizontal) {\r\n                dy += imui.font.cheight\r\n            } else {\r\n                dx += imui.font.cwidth * (txt.length + 1)\r\n            }\r\n            if (dx > rect.x + rect.w) {\r\n                break\r\n            }\r\n            if (dy + imui.font.cheight > rect.y + rect.h) {\r\n                break\r\n            }\r\n        }\r\n        \r\n        if (this.rect.h < imui.font.cheight * this.list.length && !this.horizontal) {\r\n            let upRect = { x: rect.x + rect.w - imui.font.cwidth, y: rect.y, w: imui.font.cwidth, h: imui.font.cheight}\r\n            let downRect = { x: rect.x + rect.w - imui.font.cwidth, y: rect.y + rect.h - imui.font.cheight, w: imui.font.cwidth, h: imui.font.cheight}\r\n            let scrollBarRect = { x: rect.x + rect.w - imui.font.cwidth, y: rect.y + imui.font.cheight, w: imui.font.cwidth, h: rect.h - (imui.font.cheight * 2) }\r\n            imui.DrawRect(scrollBarRect, this.bgScrollbar)\r\n            imui.DrawText(upRect.x, upRect.y, this.scrollbarCharacters.scrollUp, this.InsideRect(imui.mousePos.x, imui.mousePos.y, upRect) && this.state.mouseDown ? this.highlight : this.color, \r\n                this.InsideRect(imui.mousePos.x, imui.mousePos.y, upRect) && this.state.mouseDown ? { background: { colour: this.color } } : { background: { colour: this.bgScrollbar } })\r\n            imui.DrawText(downRect.x, downRect.y, this.scrollbarCharacters.scrollDown, this.InsideRect(imui.mousePos.x, imui.mousePos.y, downRect) && this.state.mouseDown ? this.highlight : this.color, \r\n                this.InsideRect(imui.mousePos.x, imui.mousePos.y, downRect) && this.state.mouseDown ? { background: { colour: this.color } } : { background: { colour: this.bgScrollbar } })\r\n\r\n            let caretPos = (this.scrollOffset / (this.list.length - 1)) * scrollBarRect.h\r\n            let caretColr = this.color\r\n            let caretBg = this.bgScrollbar\r\n\r\n            if (!this.draggingCaret) {\r\n                if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, upRect) && this.Clicked()) {\r\n                    if (this.scrollOffset !== null) {\r\n                        this.scrollOffset = this.scrollOffset - 1 < 0 ? 0: this.scrollOffset - 1\r\n                    }\r\n                } else if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, downRect) && this.Clicked()) {\r\n                    if (this.scrollOffset !== null) {\r\n                        this.scrollOffset = this.scrollOffset + 1 > this.list.length - 1 ? this.list.length - 1: this.scrollOffset + 1\r\n                    }\r\n                } else if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, { x: scrollBarRect.x, y: scrollBarRect.y + caretPos, w: scrollBarRect.w, h: imui.font.cwidth}) && this.state.mouseDown) {\r\n                    this.draggingCaret = true\r\n                } else if (this.InsideRect(imui.mousePos.x, imui.mousePos.y, scrollBarRect) && this.Clicked()) {\r\n                    if (this.scrollOffset !== null) {\r\n                        if (imui.mousePos.y < scrollBarRect.y + caretPos) {\r\n                            this.scrollOffset = this.scrollOffset - 10 > 0 ? this.scrollOffset - 10 : 0\r\n                        } else if (imui.mousePos.y > scrollBarRect.y + caretPos + imui.font.cheight) {\r\n                            this.scrollOffset = this.scrollOffset + 10 < this.list.length - 1 ? this.scrollOffset + 10 : this.list.length - 1\r\n                        }\r\n                    }\r\n                }\r\n            } else if (this.draggingCaret && this.state.mouseDown) {\r\n                this.scrollOffset = parseInt(((imui.mousePos.y - scrollBarRect.y) / scrollBarRect.h) * (this.list.length - 2))\r\n                if (this.scrollOffset < 0) {\r\n                    this.scrollOffset = 0\r\n                } else if (this.scrollOffset > this.list.length - 1) {\r\n                    this.scrollOffset = this.list.length - 1\r\n                }\r\n                caretBg = this.color\r\n                caretColr = this.bgScrollbar\r\n            } else if (this.draggingCaret) {\r\n                this.draggingCaret = false\r\n            }\r\n            let caretHovered = this.InsideRect(imui.mousePos.x, imui.mousePos.y, { x: scrollBarRect.x, y: scrollBarRect.y + caretPos, w: scrollBarRect.w, h: imui.font.cwidth})\r\n            imui.DrawText(scrollBarRect.x, scrollBarRect.y + caretPos, this.scrollbarCharacters.scrollCaret, caretHovered ? this.highlight : caretColr, { background: { colour: caretBg } })\r\n        }\r\n    }\r\n}\r\n\r\nexport default List","import Element from './Element.js'\r\n\r\nclass Image extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.image = params.image ? params.image : null\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.image) {\r\n            imui.ctx.drawImage(this.image, this.rect.x, this.rect.y)\r\n        }\r\n    }\r\n}\r\n\r\nexport default Image","import Element from './Element.js'\r\n\r\nclass FrameImage extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n\r\n        this.image = params.image ? params.image : null\r\n        if (params.innerRect) {\r\n            this.innerRect = params.innerRect\r\n        } else if (params.borderWidth) {\r\n            this.innerRect = {\r\n                x: params.borderWidth,\r\n                y: params.borderWidth,\r\n                w: this.rect.w - params.borderWidth * 2,\r\n                h: this.rect.h - params.borderWidth * 2\r\n            }\r\n        } else {\r\n            this.innerRect = {\r\n                x: 0, y: 0,\r\n                w: this.rect.w, h: this.rect.h\r\n            }\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n\r\n        if (this.image) {\r\n            // Top Left Corner\r\n            imui.ctx.drawImage(this.image, 0, 0, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            // Top Right Corner\r\n            imui.ctx.drawImage(this.image, this.image.width - this.innerRect.x, 0, this.innerRect.x, this.innerRect.y, this.rect.x + this.rect.w - this.innerRect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            // Bottom Left Corner\r\n            imui.ctx.drawImage(this.image, 0, this.image.height - this.innerRect.y, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y + this.rect.h - this.innerRect.y, this.innerRect.x, this.innerRect.y)\r\n            // Bottom Right Corner\r\n            imui.ctx.drawImage(this.image, this.image.width - this.innerRect.x, this.image.height - this.innerRect.y, this.innerRect.x, this.innerRect.y, this.rect.x + this.rect.w - this.innerRect.x, this.rect.y + this.rect.h - this.innerRect.y, this.innerRect.x, this.innerRect.y)\r\n\r\n            // Top Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - this.innerRect.x; dx += this.image.width - this.innerRect.x * 2) {\r\n                let dw = this.image.width - this.innerRect.x * 2\r\n                if (dx + dw > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dw = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                imui.ctx.drawImage(this.image, this.innerRect.x, 0, dw, this.innerRect.y, dx, this.rect.y, dw, this.innerRect.y)\r\n            }\r\n            // Bottom Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - this.innerRect.x; dx += this.image.width - this.innerRect.x * 2) {\r\n                let dw = this.image.width - this.innerRect.x * 2\r\n                if (dx + dw > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dw = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                imui.ctx.drawImage(this.image, this.innerRect.x, this.image.height - this.innerRect.y, dw, this.innerRect.y, dx, this.rect.y + this.rect.h - this.innerRect.y, dw, this.innerRect.y)\r\n            }\r\n\r\n            // Left Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - this.innerRect.y; dy += this.image.height - this.innerRect.y * 2) {\r\n                let dh = this.image.height - this.innerRect.y * 2\r\n                if (dy + dh > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    dh = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(this.image, 0, this.innerRect.y, this.innerRect.x, dh, this.rect.x, dy, this.innerRect.x, dh)\r\n            }\r\n            // Right Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - this.innerRect.y; dy += this.image.height - this.innerRect.y * 2) {\r\n                let dh = this.image.height - this.innerRect.y * 2\r\n                if (dy + dh > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    dh = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(this.image, this.image.width - this.innerRect.x, this.innerRect.y, this.innerRect.x, dh, this.rect.x + this.rect.w - this.innerRect.x, dy, this.innerRect.x, dh)\r\n            }\r\n\r\n            // Centre\r\n            let sx = this.innerRect.x\r\n            let sy = this.innerRect.y\r\n            let sw = this.image.width - this.innerRect.x * 2\r\n            let sh = this.image.height - this.innerRect.y * 2\r\n            let dx = this.innerRect.x + this.rect.x\r\n            let dy = this.innerRect.y + this.rect.y\r\n            while (dy < this.rect.y + this.rect.h - this.innerRect.y) {\r\n                let w = sw\r\n                let h = sh\r\n                if (dx + w > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    w = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                if (dy + h > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    h = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(this.image, sx, sy, w, h, dx, dy, w, h)\r\n                dx += sw\r\n                if (dx > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dx = this.innerRect.x + this.rect.x\r\n                    dy += sh\r\n                }\r\n            }\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        imui.DrawText(rect.x + this.innerRect.x, rect.y + this.innerRect.y, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default FrameImage","import Element from './Element.js'\r\n\r\nclass ButtonImage extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n\r\n        this.image = params.image ? params.image : null\r\n        this.imageDown = params.imageDown ? params.imageDown : null\r\n        this.imageHover = params.imageHover ? params.imageHover : null\r\n        \r\n        if (params.innerRect) {\r\n            this.innerRect = params.innerRect\r\n        } else if (params.borderWidth) {\r\n            this.innerRect = {\r\n                x: params.borderWidth,\r\n                y: params.borderWidth,\r\n                w: this.rect.w - params.borderWidth * 2,\r\n                h: this.rect.h - params.borderWidth * 2\r\n            }\r\n        } else {\r\n            this.innerRect = {\r\n                x: 0, y: 0,\r\n                w: this.rect.w, h: this.rect.h\r\n            }\r\n        }\r\n    }\r\n\r\n    drawImageSlice(imui, image) {\r\n        if (image) {\r\n            // Top Left Corner\r\n            imui.ctx.drawImage(image, 0, 0, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            // Top Right Corner\r\n            imui.ctx.drawImage(image, image.width - this.innerRect.x, 0, this.innerRect.x, this.innerRect.y, this.rect.x + this.rect.w - this.innerRect.x, this.rect.y, this.innerRect.x, this.innerRect.y)\r\n            // Bottom Left Corner\r\n            imui.ctx.drawImage(image, 0, image.height - this.innerRect.y, this.innerRect.x, this.innerRect.y, this.rect.x, this.rect.y + this.rect.h - this.innerRect.y, this.innerRect.x, this.innerRect.y)\r\n            // Bottom Right Corner\r\n            imui.ctx.drawImage(image, image.width - this.innerRect.x, image.height - this.innerRect.y, this.innerRect.x, this.innerRect.y, this.rect.x + this.rect.w - this.innerRect.x, this.rect.y + this.rect.h - this.innerRect.y, this.innerRect.x, this.innerRect.y)\r\n\r\n            // Top Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - this.innerRect.x; dx += image.width - this.innerRect.x * 2) {\r\n                let dw = image.width - this.innerRect.x * 2\r\n                if (dx + dw > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dw = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                imui.ctx.drawImage(image, this.innerRect.x, 0, dw, this.innerRect.y, dx, this.rect.y, dw, this.innerRect.y)\r\n            }\r\n            // Bottom Middle Section\r\n            for (let dx = this.rect.x + this.innerRect.x; dx < this.rect.x + this.rect.w - this.innerRect.x; dx += image.width - this.innerRect.x * 2) {\r\n                let dw = image.width - this.innerRect.x * 2\r\n                if (dx + dw > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dw = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                imui.ctx.drawImage(image, this.innerRect.x, image.height - this.innerRect.y, dw, this.innerRect.y, dx, this.rect.y + this.rect.h - this.innerRect.y, dw, this.innerRect.y)\r\n            }\r\n\r\n            // Left Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - this.innerRect.y; dy += image.height - this.innerRect.y * 2) {\r\n                let dh = image.height - this.innerRect.y * 2\r\n                if (dy + dh > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    dh = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(image, 0, this.innerRect.y, this.innerRect.x, dh, this.rect.x, dy, this.innerRect.x, dh)\r\n            }\r\n            // Right Middle Section\r\n            for (let dy = this.rect.y + this.innerRect.y; dy < this.rect.y + this.rect.h - this.innerRect.y; dy += image.height - this.innerRect.y * 2) {\r\n                let dh = image.height - this.innerRect.y * 2\r\n                if (dy + dh > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    dh = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(image, image.width - this.innerRect.x, this.innerRect.y, this.innerRect.x, dh, this.rect.x + this.rect.w - this.innerRect.x, dy, this.innerRect.x, dh)\r\n            }\r\n\r\n            // Centre\r\n            \r\n            let sx = this.innerRect.x\r\n            let sy = this.innerRect.y\r\n            let sw = image.width - this.innerRect.x * 2\r\n            let sh = image.height - this.innerRect.y * 2\r\n            let dx = this.innerRect.x + this.rect.x\r\n            let dy = this.innerRect.y + this.rect.y\r\n            while (dy < this.rect.y + this.rect.h - this.innerRect.y) {\r\n                let w = sw\r\n                let h = sh\r\n                if (dx + w > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    w = this.rect.x + this.rect.w - this.innerRect.x - dx\r\n                }\r\n                if (dy + h > this.rect.y + this.rect.h - this.innerRect.y) {\r\n                    h = this.rect.y + this.rect.h - this.innerRect.y - dy\r\n                }\r\n                imui.ctx.drawImage(image, sx, sy, w, h, dx, dy, w, h)\r\n                dx += sw\r\n                if (dx > this.rect.x + this.rect.w - this.innerRect.x) {\r\n                    dx = this.innerRect.x + this.rect.x\r\n                    dy += sh\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let offy = this.state.mouseDown ? 2 : 0\r\n        let colr = this.Hover() ? this.highlight : this.color\r\n\r\n        if (this.Hover() && !this.state.mouseDown && this.imageHover) {\r\n            this.drawImageSlice(imui, this.imageHover)\r\n        } else if (this.state.mouseDown && this.imageDown) {\r\n            this.drawImageSlice(imui, this.imageDown)\r\n        } else {\r\n            this.drawImageSlice(imui, this.image)\r\n        }\r\n        \r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n    \r\n\r\n        imui.DrawText(rect.x + (rect.w / 2) - (txt.length * imui.font.cwidth) / 2, rect.y + (rect.h / 2) - (imui.font.cheight / 2) + offy, txt, colr)\r\n    }\r\n}\r\n\r\nexport default ButtonImage","import { GetElementType } from './elements.js'\r\n\r\nclass ImUI {\r\n    constructor(canvas, font) {\r\n        this.canvas = canvas\r\n        this.originalCanvas = canvas\r\n        this.ctx = canvas.getContext('2d')\r\n        this.originalCtx = this.ctx\r\n        bfontjs.LoadDefaultFonts()\r\n        this.font = font ? font : bfontjs.Fonts('default')\r\n\r\n        this.mousePos = { x: 0, y: 0 }\r\n        this.mouseButton = 0\r\n        \r\n        this.active = null\r\n        this.elements = []\r\n        this.postUpdateIds = []\r\n          \r\n        this.onUpdate = () => {\r\n            return []\r\n        }\r\n\r\n        this.canvas.addEventListener('mousemove', (e) => {\r\n            if (this.executing) {\r\n                this.mousePos.x = parseInt((e.clientX - canvas.offsetLeft) * (this.canvas.width / parseInt(this.canvas.style.width)))\r\n                this.mousePos.y = parseInt((e.clientY - canvas.offsetTop) * (this.canvas.height / parseInt(this.canvas.style.height)))\r\n            }\r\n        })\r\n\r\n        this.canvas.addEventListener('mousedown', (e) => {\r\n            if (this.executing) {\r\n                this.mouseButton = e.buttons\r\n            }\r\n        })\r\n        \r\n        this.canvas.addEventListener('mouseup', (e) => {\r\n            if (this.executing) {\r\n                this.mouseButton = 0\r\n            }\r\n        })\r\n\r\n        window.addEventListener('keydown', (e) => {\r\n            if (this.executing) {\r\n                if (e.key === 'Tab') {\r\n                e.preventDefault()                \r\n                }\r\n            }\r\n        })\r\n\r\n        window.addEventListener('keyup', (e) => {\r\n            if (this.executing) {\r\n                if (this.active) {\r\n                    let element = this.elements.filter(f => f !== undefined).filter(f => f.id === this.active)\r\n                    if (element.length > 0 && element[0].editable) {\r\n                        if (e.key.length === 1) {\r\n                            element[0].prevText = element[0].text\r\n                            element[0].text += e.key\r\n                        } else if (e.key === 'Backspace') {\r\n                            element[0].prevText = element[0].text\r\n                            element[0].text = element[0].text.substring(0, element[0].text.length - 1)\r\n                        } else if (e.key === 'Enter') {\r\n                            this.active = null\r\n                        }\r\n                    }\r\n                    if (element.length > 0) {\r\n                        if (e.key === 'Tab') {\r\n                            let index = this.elements.findIndex(f => f.id === this.active)\r\n                            if (index + 1 < this.elements.length) {\r\n                                index++\r\n                            } else {\r\n                                index = 0\r\n                            }\r\n                            this.active = this.elements[index].id\r\n                        }\r\n                    }\r\n                } else if (this.elements.length > 0) {\r\n                    if (e.key === 'Tab') {\r\n                        this.active = this.elements[0].id\r\n                    }\r\n                }\r\n            }\r\n            return false\r\n        })\r\n        \r\n        this.Enable()\r\n    }\r\n\r\n    Disable() {\r\n        this.executing = false\r\n    }\r\n\r\n    Enable() {\r\n        this.executing = true\r\n        this.UpdateThread()\r\n    }\r\n\r\n    // Update async thread.\r\n    UpdateThread() {\r\n        try {\r\n            if (this.executing) {\r\n                let preUpdateIds = this.elements.map(el => el.id)\r\n\r\n                this.postUpdateIds = []\r\n\r\n                this.elements = this.elements.filter(f => f !== undefined)\r\n                this.onUpdate(this)\r\n\r\n                for (let id in preUpdateIds) {\r\n                    if (this.postUpdateIds.filter(f => f === preUpdateIds[id]).length === 0) {\r\n                        this.elements[this.elements.findIndex(f => f !== undefined && f.id === preUpdateIds[id])] = undefined\r\n                    }\r\n                }\r\n                this.elements = this.elements.filter(f => f !== undefined)\r\n        \r\n                this.Update()\r\n            \r\n                setTimeout(() => this.UpdateThread(), 16)\r\n            }\r\n        } catch (e) { console.error(e) }\r\n    }\r\n\r\n    ChangeContext(canvas) {\r\n        this.canvas = canvas\r\n        this.ctx = canvas.getContext('2d')\r\n    }\r\n    \r\n    ResetContext() {\r\n        this.canvas = this.originalCanvas\r\n        this.ctx = this.originalCtx\r\n    }\r\n\r\n    RemoveElement(id) {\r\n        let index = this.elements.findIndex(f => f.id === id)\r\n        if (index >= 0) {\r\n            let elements = []\r\n            for (let e in this.elements) {\r\n                let element = this.elements[e]\r\n                if (element.id !== id) {\r\n                    elements.push(element)\r\n                }\r\n            }\r\n            this.elements = elements\r\n        }\r\n    }\r\n\r\n    ElementToTop(id) {\r\n        let index = this.elements.findIndex(f => f.id === id)\r\n        if (index >= 0) {\r\n            let elements = []\r\n            if (index - 1 >= 0) {\r\n                elements = this.elements.slice(0, index)\r\n            }\r\n            if (index + 1 <= this.elements.length - 1) {\r\n                elements.push(...this.elements.slice(index + 1))\r\n            }\r\n            elements.push(this.elements[index])\r\n            this.elements = elements\r\n        }\r\n    }\r\n\r\n    Element(params) {\r\n        params.type = params.type ? params.type : 'element'\r\n        let elem = this.elements.filter(f => f.id === params.id)\r\n        if (elem.length === 0) {\r\n            let ElementClass = GetElementType(params.type)\r\n            let el = new ElementClass(params)\r\n            el.Update(this, false)\r\n            this.elements.push(el)\r\n            this.postUpdateIds.push(params.id)\r\n            return el\r\n        } else {\r\n            this.postUpdateIds.push(params.id)\r\n            for (let p in params) {\r\n                elem[0][p] = params[p]\r\n            }\r\n            return elem[0]\r\n        }\r\n    }\r\n    \r\n    DrawTextFont(font, x, y, text, color, effects) {\r\n        if (text === undefined || text === \"\") {\r\n            return\r\n        }\r\n        return bfontjs.DrawText(this.ctx, parseInt(x), parseInt(y), text, color, font, effects)\r\n    }\r\n\r\n    DrawText(x, y, text, color, effects) {\r\n        return this.DrawTextFont(this.font, x, y, text, color, effects)\r\n    }\r\n    \r\n    DrawRect(rect, color) {\r\n        this.ctx.fillStyle = color\r\n        this.ctx.fillRect(rect.x, rect.y, rect.w, rect.h)\r\n    }\r\n    \r\n    StrokeRect(rect, color) {\r\n        this.ctx.lineWidth = 1\r\n        this.ctx.strokeStyle = color\r\n        this.ctx.strokeRect(parseInt(rect.x) + 0.5, parseInt(rect.y) + 0.5, parseInt(rect.w), parseInt(rect.h))\r\n    }\r\n    StrokeLine(x, y, x2, y2, color) {\r\n        this.ctx.lineWidth = 1\r\n        this.ctx.strokeStyle = color\r\n\r\n        this.ctx.beginPath()\r\n        this.ctx.moveTo(parseInt(x) + 0.5, parseInt(y) + 0.5)\r\n        this.ctx.lineTo(parseInt(x2) + 0.5, parseInt(y2) + 0.5)\r\n        this.ctx.stroke()\r\n    }\r\n\r\n    Update() {\r\n        let eventHandled = false\r\n        for (let e = this.elements.length - 1; e >= 0; e--) {\r\n            if (!eventHandled && this.elements[e]) {\r\n                eventHandled = this.elements[e].Update(this, eventHandled)\r\n            }\r\n        }\r\n    }\r\n\r\n    Draw() {\r\n        for (let e in this.elements) {\r\n            if (this.elements[e]) {\r\n                this.elements[e].Draw(this)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport { ImUI }","import Element from './elements/Element.js'\r\nimport FrameFlat from './elements/FrameFlat.js'\r\nimport Frame3d from './elements/Frame3d.js'\r\nimport Button3d from './elements/Button3d.js'\r\nimport ButtonFlat from './elements/ButtonFlat.js'\r\nimport TextBoxFlat from './elements/TextBoxFlat.js'\r\nimport List from './elements/List.js'\r\nimport Image from './elements/Image.js'\r\nimport FrameImage from './elements/FrameImage.js'\r\nimport ButtonImage from './elements/ButtonImage.js'\r\n\r\nfunction GetElementType(type) {\r\n    switch(type.toLowerCase()) {\r\n        case 'element':\r\n            return Element\r\n        case 'frameflat':\r\n            return FrameFlat\r\n        case 'frame3d':\r\n            return Frame3d\r\n        case 'button3d':\r\n            return Button3d\r\n        case 'buttonflat':\r\n            return ButtonFlat\r\n        case 'textboxflat':\r\n            return TextBoxFlat\r\n        case 'list':\r\n            return List\r\n        case 'image':\r\n            return Image\r\n        case 'frameimage':\r\n            return FrameImage\r\n        case 'buttonimage':\r\n            return ButtonImage\r\n    }\r\n}\r\n\r\nexport { Element, FrameFlat, Frame3d, Button3d, ButtonFlat, TextBoxFlat, List, Image, FrameImage, ButtonImage, GetElementType }"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__517__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","constructor","params","id","Error","this","autosize","rect","x","y","w","h","color","bgcolor","text","prevText","wrap","font","state","clicked","mouseOver","mouseDown","mouseUp","change","prevState","buffer","drawBuffer","InitializeBuffer","margin","mx","my","document","createElement","width","height","bufferCtx","getContext","createCanvas","DidChangeState","BuildPreviousState","InsideRect","Clicked","Hover","MouseDown","MouseUp","setState","p","Update","imui","eventHandled","evt","length","cwidth","cheight","active","changed","mousePos","mouseButton","GetMaxTextWidth","txt","lines","codepage","filter","f","codenumber","symbol","split","e","console","log","l","line","GetWrappedText","wrapPos","parseInt","c","join","newLines","push","slice","trim","GetWordWrappedText","index","substring","reverse","search","DrawText","textcolor","highlight","bfontjs","Fonts","default","rectCharWidth","Math","floor","DrawTextFont","_Draw","DrawRect","Draw","ChangeContext","initialDrawComplete","clearRect","ResetContext","ctx","drawImage","super","substr","borderRect","StrokeRect","inverted","shadow","StrokeLine","leftChar","rightChar","defaultText","editable","Text","Date","now","bgScrollbar","list","currentItem","scrollOffset","topDown","horizontal","scrollbar","scrollbarCharacters","scrollUp","scrollDown","scrollCaret","draggingCaret","dx","dy","txtRect","isHoverItem","isMouseDownItem","background","colour","upRect","downRect","scrollBarRect","caretPos","caretColr","caretBg","caretHovered","image","innerRect","borderWidth","dw","dh","sx","sy","sw","sh","imageDown","imageHover","drawImageSlice","offy","colr","ImUI","canvas","originalCanvas","originalCtx","LoadDefaultFonts","elements","postUpdateIds","onUpdate","addEventListener","executing","clientX","offsetLeft","style","clientY","offsetTop","buttons","window","preventDefault","element","findIndex","Enable","Disable","UpdateThread","preUpdateIds","map","el","setTimeout","error","RemoveElement","ElementToTop","Element","type","elem","toLowerCase","GetElementType","effects","fillStyle","fillRect","lineWidth","strokeStyle","strokeRect","x2","y2","beginPath","moveTo","lineTo","stroke"],"sourceRoot":""}