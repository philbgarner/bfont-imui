{"version":3,"file":"bfont-imui.js","mappings":"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","sources":["webpack://imui/webpack/universalModuleDefinition","webpack://imui/external umd \"canvas\"","webpack://imui/webpack/bootstrap","webpack://imui/webpack/runtime/define property getters","webpack://imui/webpack/runtime/hasOwnProperty shorthand","webpack://imui/webpack/runtime/make namespace object","webpack://imui/./src/elements/Element.js","webpack://imui/./src/elements/FrameFlat.js","webpack://imui/./src/elements/Frame3d.js","webpack://imui/./src/elements/Button3d.js","webpack://imui/./src/elements/ButtonFlat.js","webpack://imui/./src/elements/TextBoxFlat.js","webpack://imui/./src/imui.js","webpack://imui/./src/elements.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"canvas\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"canvas\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imui\"] = factory(require(\"canvas\"));\n\telse\n\t\troot[\"imui\"] = factory(root[\"canvas\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__517__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__517__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { createCanvas } from 'canvas'\r\n\r\nclass Element {\r\n    constructor(params) {\r\n        if (!params.id) {\r\n            throw new Error('Element must have unique id.')\r\n        }\r\n        this.id = params.id\r\n\r\n        this.autosize = params.autosize ? params.autosize : true\r\n        if (params.rect) {\r\n            this.autosize = false\r\n        }\r\n        this.rect = params.rect ? params.rect : { x: 0, y: 0, w: 0, h: 0 }\r\n        this.color = params.color ? params.color : '#ccccccff'\r\n        this.bgcolor = params.bgcolor ? params.bgcolor : undefined\r\n        this.text = params.text ? params.text : ''\r\n        this.prevText = this.text\r\n\r\n        this.rect.x = params.x ? params.x : this.rect.x\r\n        this.rect.y = params.y ? params.y : this.rect.y\r\n\r\n        this.state = {\r\n            clicked: false,\r\n            mouseOver: false,\r\n            mouseDown: false,\r\n            mouseUp: false,\r\n            change: true\r\n        }\r\n        this.prevState = params.prevState ? params.prevState :\r\n            {\r\n                clicked: false,\r\n                mouseOver: false,\r\n                mouseDown: false,\r\n                mouseUp: false,\r\n                change: false\r\n            }\r\n\r\n        this.elements = []\r\n\r\n        this.buffer = null\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer()\r\n        }\r\n    }\r\n\r\n    InitializeBuffer(margin) {\r\n        console.log('initializebuffer', margin)\r\n        let mx = 0, my = 0\r\n        if (margin) {\r\n            mx = margin.x\r\n            my = margin.y\r\n            this.margin = margin\r\n        } else {\r\n            this.margin = { x: 0, y: 0 }\r\n        }\r\n        try {\r\n            this.buffer = document.createElement('canvas')\r\n            this.buffer.width = this.rect.w + mx\r\n            this.buffer.height = this.rect.h + my\r\n            this.bufferCtx = this.buffer.getContext('2d')\r\n        } catch {\r\n            this.buffer = createCanvas(this.rect.w + mx, this.rect.h + my)\r\n            this.bufferCtx = this.buffer.getContext('2d')\r\n        }\r\n    }\r\n\r\n    DidChangeState() {\r\n        return this.prevState.clicked !== this.state.clicked ||\r\n            this.prevState.mouseOver !== this.state.mouseOver ||\r\n            this.prevState.mouseDown !== this.state.mouseDown ||\r\n            this.prevState.mouseUp !== this.state.mouseUp ||\r\n            this.prevState.change !== this.state.change\r\n    }\r\n\r\n    BuildPreviousState() {\r\n        return {\r\n            clicked: this.state.clicked,\r\n            mouseOver: this.state.mouseOver,\r\n            mouseDown: this.state.mouseDown,\r\n            mouseUp: this.state.mouseUp,\r\n            change: this.state.change\r\n        }\r\n    }\r\n\r\n    Clicked() { return this.state.clicked }\r\n    Hover() { return this.state.mouseOver }\r\n    MouseDown() { return this.state.mouseDown }\r\n    MouseUp() { return this.state.mouseUp }\r\n\r\n    setState(params) {\r\n        this.prevState = this.BuildPreviousState()\r\n        for (let p in params) {\r\n            this.state[p] = params[p]\r\n        }\r\n    }\r\n\r\n    Update(imui) {\r\n        if (this.autosize) {\r\n            this.rect.w = this.text.length * imui.font.cwidth\r\n            this.rect.h = imui.font.cheight\r\n        }\r\n        if (imui.mousePos.x >= this.rect.x && imui.mousePos.y >= this.rect.y && imui.mousePos.x <= this.rect.x + this.rect.w && imui.mousePos.y <= this.rect.y + this.rect.h) {\r\n            if (this.state.mouseOver && this.state.clicked) {\r\n                this.setState({ mouseOver: true, clicked: false})\r\n            } else {\r\n                this.setState({ mouseOver: true })\r\n            }\r\n            if (imui.mouseButton > 0 && !this.state.mouseDown) {\r\n                this.setState({ mouseDown: true })\r\n            }\r\n            if (imui.mouseButton === 0 && this.prevState.mouseDown) {\r\n                this.setState({ mouseUp: true, mouseDown: false })\r\n            } else if (imui.mouseButton === 0 && this.state.mouseUp) {\r\n                this.setState({ mouseUp: false, clicked: true })\r\n                imui.active = this.id\r\n            }\r\n        } else {\r\n            this.setState({ mouseOver: false, mouseDown: false, mouseUp: false, clicked: false })\r\n        }\r\n        if (this.text !== this.prevText) {\r\n            this.setState({ change: true })\r\n            this.prevText = this.text\r\n        } else {\r\n            this.setState({ change: false })\r\n        }        \r\n        if (this.state.clicked && this.id !== imui.active) {\r\n            imui.active = this.id\r\n            this.setState({ changed: true })\r\n        }\r\n\r\n        for (let e in this.elements) {\r\n            this.elements[e].Update(imui)\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n\r\n        let textcolor = this.color\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n        }\r\n\r\n        imui.DrawText(rect.x, rect.y, this.text, textcolor)\r\n    }\r\n\r\n    Draw(imui) {\r\n        let rect = this.rect\r\n        if (this.buffer) {\r\n            imui.ChangeContext(this.buffer)\r\n            rect = { x: 0, y: 0, w: this.rect.w, h: this.rect.h }\r\n\r\n            if (this.DidChangeState() || (!this.initialDrawComplete)) {\r\n                if (this.buffer) {\r\n                    this.bufferCtx.clearRect(0, 0, rect.w, rect.h)\r\n                }\r\n                \r\n                this._Draw(imui, rect)\r\n                this.initialDrawComplete = true\r\n            }\r\n\r\n            imui.ResetContext()\r\n            imui.ctx.drawImage(this.buffer, this.rect.x, this.rect.y)\r\n        } else {\r\n            this._Draw(imui, this.rect)\r\n        }\r\n    }\r\n}\r\n\r\nexport default Element\r\n","import Element from './Element.js'\r\n\r\nclass FrameFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n        imui.StrokeRect(borderRect, this.color)\r\n\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + imui.font.cheight, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default FrameFlat","import Element from './Element.js'\r\n\r\nclass Frame3d extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n\r\n        let highlight = !this.inverted ? this.highlight : this.shadow\r\n        let shadow = !this.inverted ? this.shadow : this.highlight\r\n\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x + borderRect.w, borderRect.y, highlight)\r\n        imui.StrokeLine(borderRect.x + borderRect.w, borderRect.y, borderRect.x + borderRect.w, borderRect.y + borderRect.h, highlight)\r\n        imui.StrokeLine(borderRect.x, borderRect.y + borderRect.h, borderRect.x + borderRect.w, borderRect.y + borderRect.h, shadow)\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x, borderRect.y + borderRect.h, shadow)\r\n\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + imui.font.cheight, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default Frame3d","import Element from './Element.js'\r\n\r\nclass Button3d extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        if (this.bgcolor) {\r\n            imui.DrawRect(rect, this.bgcolor)\r\n        }\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let borderRect = { x: rect.x + imui.font.cwidth / 2, y: rect.y + imui.font.cheight / 2, w: rect.w - imui.font.cwidth, h: rect.h - imui.font.cheight}\r\n        \r\n        let inverted = this.inverted ? this.inverted : false\r\n        if (this.state.mouseDown) {\r\n            inverted = true\r\n        }\r\n\r\n        let highlight = !inverted ? this.highlight : this.shadow\r\n        let shadow = !inverted ? this.shadow : this.highlight\r\n\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x + borderRect.w, borderRect.y, highlight)\r\n        imui.StrokeLine(borderRect.x + borderRect.w, borderRect.y, borderRect.x + borderRect.w, borderRect.y + borderRect.h, highlight)\r\n        imui.StrokeLine(borderRect.x, borderRect.y + borderRect.h, borderRect.x + borderRect.w, borderRect.y + borderRect.h, shadow)\r\n        imui.StrokeLine(borderRect.x, borderRect.y, borderRect.x, borderRect.y + borderRect.h, shadow)\r\n\r\n        let mx = 0, my = 0\r\n        if (this.state.mouseDown) {\r\n            mx = parseInt(imui.font.cwidth * 0.3)\r\n            my = parseInt(imui.font.cheight * 0.1)\r\n        }\r\n        imui.DrawText(borderRect.x + mx + borderRect.w / 2 - (txt.length * imui.font.cwidth) / 2, borderRect.y + my + borderRect.h / 2 - imui.font.cheight / 2, txt, this.color)\r\n    }\r\n}\r\n\r\nexport default Button3d","import Element from './Element.js'\r\n\r\nclass ButtonFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    _Draw(imui, rect) {\r\n        let txt = this.text.length > (rect.w - 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            if (this.state.mouseDown) {\r\n                textcolor = this.bgcolor\r\n                bgcolor = this.color\r\n            }\r\n\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n        }\r\n\r\n        imui.DrawText(rect.x + rect.w / 2 - (txt.length * imui.font.cwidth) / 2, rect.y + rect.h / 2 - imui.font.cheight / 2, txt, textcolor)\r\n\r\n        let leftChar = '<', rightChar = '>'\r\n\r\n        imui.DrawText(rect.x, rect.y + rect.h / 2 - imui.font.cheight / 2, leftChar, textcolor)\r\n        imui.DrawText(rect.x + rect.w - imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, rightChar, textcolor)\r\n    }\r\n}\r\n\r\nexport default ButtonFlat","import Element from './Element.js'\r\n\r\nclass TextBoxFlat extends Element {\r\n    constructor(params) {\r\n        super(params)\r\n        this.rect.h = parseInt(this.rect.h / 16) * 16\r\n        this.rect.w = parseInt(this.rect.w / 9) * 9\r\n\r\n        this.text = params.defaultText ? params.defaultText : ''\r\n        this.editable = params.editable ? params.editable : true\r\n\r\n        if (params.drawBuffer) {\r\n            this.InitializeBuffer({x: 9, y: 32})\r\n        }\r\n    }\r\n\r\n    Text() { return this.text }\r\n\r\n    _Draw(imui, rect) {\r\n        let txt = this.text.length > (rect.w - imui.font.cwidth * 2) / imui.font.cwidth ? this.text.substr(0, parseInt((rect.w - 2) / imui.font.cwidth)) : this.text\r\n\r\n        let textcolor = this.color\r\n        let bgcolor = this.bgcolor\r\n\r\n        if (this.state.mouseOver && !this.state.mouseDown && this.highlight) {\r\n            textcolor = this.highlight\r\n        }\r\n\r\n        if (bgcolor) {\r\n            if (this.state.mouseDown) {\r\n                textcolor = this.bgcolor\r\n                bgcolor = this.color\r\n            }\r\n\r\n            imui.DrawRect(rect, bgcolor)\r\n        }\r\n\r\n        if (this.id === imui.active) {\r\n            textcolor = this.highlight ? this.highlight : textcolor\r\n            if (Date.now() % 1000 > 500) {\r\n                imui.DrawText(rect.x + imui.font.cwidth + txt.length * imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, '_', textcolor)\r\n            }\r\n        }\r\n        imui.DrawText(rect.x + imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, txt, textcolor)\r\n\r\n\r\n        let leftChar = '[', rightChar = ']'\r\n\r\n        imui.DrawText(rect.x, rect.y + rect.h / 2 - imui.font.cheight / 2, leftChar, textcolor)\r\n        imui.DrawText(rect.x + rect.w - imui.font.cwidth, rect.y + rect.h / 2 - imui.font.cheight / 2, rightChar, textcolor)\r\n    }\r\n}\r\n\r\nexport default TextBoxFlat","import { GetElementType } from './elements.js'\r\n\r\nclass ImUI {\r\n    constructor(canvas, font) {\r\n        this.canvas = canvas\r\n        this.originalCanvas = canvas\r\n        this.ctx = canvas.getContext('2d')\r\n        this.originalCtx = this.ctx\r\n        bfontjs.LoadDefaultFonts()\r\n        this.font = font ? font : bfontjs.Fonts('default')\r\n\r\n        this.mousePos = { x: 0, y: 0 }\r\n        this.mouseButton = 0\r\n        \r\n        this.active = null\r\n        this.elements = []\r\n        this.postUpdateIds = []\r\n          \r\n        this.onUpdate = () => {\r\n            return []\r\n        }\r\n\r\n        this.canvas.addEventListener('mousemove', (e) => {\r\n            this.mousePos.x = parseInt(e.clientX * (this.canvas.width / parseInt(this.canvas.style.width)))\r\n            this.mousePos.y = parseInt(e.clientY * (this.canvas.height / parseInt(this.canvas.style.height)))\r\n        })\r\n\r\n        this.canvas.addEventListener('mousedown', (e) => {\r\n            this.mouseButton = e.buttons\r\n        })\r\n        \r\n        this.canvas.addEventListener('mouseup', (e) => {\r\n            this.mouseButton = 0\r\n        })\r\n\r\n        window.addEventListener('keydown', (e) => {\r\n            if (e.key === 'Tab') {\r\n                e.preventDefault()                \r\n            }\r\n        })\r\n\r\n        window.addEventListener('keyup', (e) => {\r\n            if (this.active) {\r\n                let element = this.elements.filter(f => f.id === this.active)\r\n                if (element.length > 0 && element[0].editable) {\r\n                    if (e.key.length === 1) {\r\n                        element[0].prevText = element[0].text\r\n                        element[0].text += e.key\r\n                    } else if (e.key === 'Backspace') {\r\n                        element[0].prevText = element[0].text\r\n                        element[0].text = element[0].text.substring(0, element[0].text.length - 1)\r\n                    } else if (e.key === 'Enter') {\r\n                        this.active = null\r\n                    }\r\n                }\r\n                if (element.length > 0) {\r\n                    if (e.key === 'Tab') {\r\n                        let index = this.elements.findIndex(f => f.id === this.active)\r\n                        if (index + 1 < this.elements.length) {\r\n                            index++\r\n                        } else {\r\n                            index = 0\r\n                        }\r\n                        this.active = this.elements[index].id\r\n                    }\r\n                }\r\n            } else if (this.elements.length > 0) {\r\n                if (e.key === 'Tab') {\r\n                    this.active = this.elements[0].id\r\n                }\r\n            }\r\n            return false\r\n        })\r\n        \r\n        // Update async thread.\r\n        setInterval(() => {\r\n            let preUpdateIds = this.elements.map(el => el.id)\r\n    \r\n            this.postUpdateIds = []\r\n            this.onUpdate(this)\r\n\r\n            for (let id in preUpdateIds) {\r\n                if (this.postUpdateIds.filter(f => f === preUpdateIds[id]).length === 0) {\r\n                    this.elements[this.elements.findIndex(f => f.id === preUpdateIds[id])] = undefined\r\n                }\r\n            }\r\n            this.elements = this.elements.filter(f => f !== undefined)\r\n    \r\n            this.Update()\r\n        }, 16) // 16 is around 60fps\r\n    }\r\n\r\n    ChangeContext(canvas) {\r\n        this.canvas = canvas\r\n        this.ctx = canvas.getContext('2d')\r\n    }\r\n    \r\n    ResetContext() {\r\n        this.canvas = this.originalCanvas\r\n        this.ctx = this.originalCtx\r\n    }\r\n\r\n    Element(params) {\r\n        params.type = params.type ? params.type : 'element'\r\n        let elem = this.elements.filter(f => f.id === params.id)\r\n        if (elem.length === 0) {\r\n            let ElementClass = GetElementType(params.type)\r\n            let el = new ElementClass(params)\r\n            el.Update(this)\r\n            this.elements.push(el)\r\n            this.postUpdateIds.push(params.id)\r\n            return el\r\n        } else {\r\n            this.postUpdateIds.push(params.id)\r\n            for (let p in params) {\r\n                elem[0][p] = params[p]\r\n            }\r\n            return elem[0]\r\n        }\r\n    }\r\n    \r\n    DrawText(x, y, text, color, effects) {\r\n        bfontjs.DrawText(this.ctx, parseInt(x), parseInt(y), text, color, this.font, effects)\r\n    }\r\n    \r\n    DrawRect(rect, color) {\r\n        this.ctx.fillStyle = color\r\n        this.ctx.fillRect(rect.x, rect.y, rect.w, rect.h)\r\n    }\r\n    \r\n    StrokeRect(rect, color) {\r\n        this.ctx.lineWidth = 1\r\n        this.ctx.strokeStyle = color\r\n        this.ctx.strokeRect(parseInt(rect.x) + 0.5, parseInt(rect.y) + 0.5, parseInt(rect.w), parseInt(rect.h))\r\n    }\r\n    StrokeLine(x, y, x2, y2, color) {\r\n        this.ctx.lineWidth = 1\r\n        this.ctx.strokeStyle = color\r\n\r\n        this.ctx.beginPath()\r\n        this.ctx.moveTo(parseInt(x) + 0.5, parseInt(y) + 0.5)\r\n        this.ctx.lineTo(parseInt(x2) + 0.5, parseInt(y2) + 0.5)\r\n        this.ctx.stroke()\r\n    }\r\n\r\n    Update() {\r\n        for (let e in this.elements) {\r\n            this.elements[e].Update(this)\r\n        }\r\n    }\r\n\r\n    Draw() {\r\n        for (let e in this.elements) {\r\n            this.elements[e].Draw(this)\r\n        }\r\n    }\r\n}\r\n\r\nexport { ImUI }","import Element from './elements/Element.js'\r\nimport FrameFlat from './elements/FrameFlat.js'\r\nimport Frame3d from './elements/Frame3d.js'\r\nimport Button3d from './elements/Button3d.js'\r\nimport ButtonFlat from './elements/ButtonFlat.js'\r\nimport TextBoxFlat from './elements/TextBoxFlat.js'\r\n\r\nfunction GetElementType(type) {\r\n    switch(type.toLowerCase()) {\r\n        case 'element':\r\n            return Element\r\n        case 'frameflat':\r\n            return FrameFlat\r\n        case 'frame3d':\r\n            return Frame3d\r\n        case 'button3d':\r\n            return Button3d\r\n        case 'buttonflat':\r\n            return ButtonFlat\r\n        case 'textboxflat':\r\n            return TextBoxFlat\r\n    }\r\n}\r\n\r\nexport { Element, FrameFlat, Frame3d, Button3d, ButtonFlat, TextBoxFlat, GetElementType }"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__517__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","constructor","params","id","Error","this","autosize","rect","x","y","w","h","color","bgcolor","text","prevText","state","clicked","mouseOver","mouseDown","mouseUp","change","prevState","elements","buffer","drawBuffer","InitializeBuffer","margin","console","log","mx","my","document","createElement","width","height","bufferCtx","getContext","createCanvas","DidChangeState","BuildPreviousState","Clicked","Hover","MouseDown","MouseUp","setState","p","Update","imui","length","font","cwidth","cheight","mousePos","mouseButton","active","changed","e","_Draw","DrawRect","textcolor","highlight","DrawText","Draw","ChangeContext","initialDrawComplete","clearRect","ResetContext","ctx","drawImage","super","parseInt","txt","substr","borderRect","StrokeRect","inverted","shadow","StrokeLine","defaultText","editable","Text","Date","now","ImUI","canvas","originalCanvas","originalCtx","bfontjs","LoadDefaultFonts","Fonts","postUpdateIds","onUpdate","addEventListener","clientX","style","clientY","buttons","window","preventDefault","element","filter","f","substring","index","findIndex","setInterval","preUpdateIds","map","el","Element","type","elem","toLowerCase","GetElementType","push","effects","fillStyle","fillRect","lineWidth","strokeStyle","strokeRect","x2","y2","beginPath","moveTo","lineTo","stroke"],"sourceRoot":""}